# Advanced PCB Guid

Are you not satisfied with a simple PCB? Here you have more information on advanced parts!

- [Ground Pour](#ground)
- [Switch Matrix](#matrix)
- [Silkscreen art](#silkscreen)
- [LCD](#lcd)
- [IO expander](#expander)
- [Reverse mount neopixels](#rneopixels)

<a name="ground pour"/>
## Ground pour

Do you have too many neopixels? A ground pour is a good way to remove the need to route the GND traces, and would allow current a shorter return circuit.

Let's take this macropad for example:

<img src="/docs/v2/pourstart.png" className="max-w-96" />

You can see 4 neopixels and the OLED missing the ground traces. Thus we would like to add a ground pour. Click on the Add Filled Zone button on the right hand side:

<img src="/docs/v2/pouraddzone.png" className="max-w-96" />

Click on one corner of your board. You will get a new window, where you select GND in the middle, and check both F.Cu and B.Cu on the left side:

<img src="/docs/v2/pouradd.png" className="max-w-96" />

Click ok, and then draw the outline around your Edge.Cuts (It can be bigger then it, but then it won't be that pretty :P). When you have finished, press B to fill. You should press B each time you make a change so the fill can get updated (well not each time, but you get what I mean). The end result is like this:

<img src="/docs/v2/pourfilled.png" className="max-w-96" />

Oh no! Do you see the empty areas on the back of the board? Those are places where the ground pour can't reach. To fix this, you need to add some vias.

<img src="/docs/v2/pouraddvias.png" className="max-w-96" />

Click on that button, and place a few vias on the parts where the ground pour is missing (and feel free to put some even the in places where it isn't missing). And don't forget to press B again to refill! Your end product should look like this:

<img src="/docs/v2/pourfinish.png" className="max-w-96" />

<a name="matrix"/>
## Switch Matrix

[If you want, here is a detailed explenation of how key matrices works.](https://pcbheaven.com/wikipages/How_Key_Matrices_Works/)

Now you aren't satisfied with the number of keys you have? With switch matrices you can have more switches on less pins! (Wow this is a good sales pitch, hire me adafruit :3)

First, open up your schematic and place the switches in a grid shape:

<img src="/docs/v2/keymatrixschematic.png" className="max-w-96" />

If you want a non-symetric shape for your keys, it's fine to delete any switch you don't want.

Now add diodes. Their schematic name is `D`. Place them at one end of the switch (any end, but it should be the same for all the switches), **pointing away from the switch**:

<img src="/docs/v2/keymatrixschematicdiode.png" className="max-w-96" />

Now, connect each row of diode heads together to form a row, and connect the each row to a GPIO pin. Do the same with the each column of switches (on the side without the diode) to form a column. Connect each column to a GPIO pin too.

<img src="/docs/v2/keymatrixschematicconnected.png" className="max-w-96" />

Now you do the same things assigning the footprints, but for diodes you will use Diode_THT:D_DO-35_SOD27_P7.62mm_Horizontal as the footprint.

<img src="/docs/v2/keymatrixschematicassign.png" className="max-w-96" />

Congrats! You got a working key matrix. Nothing really changed for the PCB routing part. Just as a side note, don't put the diodes directly on the switches (or they will collide in real life). I recommend putting them on the other side of the board (flip using F) and between the switches:

<img src="/docs/v2/keymatrixdiode.png" className="max-w-96" />

<a name="lcd"/>
## OLED
[Download this footprint library and unzip it](https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fcheyao%2Fmacropad%2Ftree%2Fmain%2FPCB%2Fthird_party%2FKiCad-SSD1306-128x64-master). Add it to kicad.

Be sure to not use the built in footprint! The correct footprint should be called 128x64OLED.

<a name="expander"/>
## IO expander

<a name="rneopixels"/>

I highly recommend you to look into how to make [a ground pour](#ground) first.

To add reverse mounted neopixels, [download this footprint library and unzip it](https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fcheyao%2Fmacropad%2Ftree%2Fmain%2FPCB%2Fthird_party%2Fneopixel.petty). You need to use the SK6812MINI symbol with it.
